########################

# Index

# 1. LIGHT TUBE FIXTURE
## Empty
## Fluorescent
## LED
## Exterior
## Sodium
## Pink
## Red
## Orange
## Yellow
## Green
## Cyan
## Blue
## Black

########################


# 1. LIGHT TUBE FIXTURE
- type: entity
  abstract: true
  parent: BaseLightFixture
  id: BaseLightTubeFixture
  name: light tube fixture
  components:
  - type: Sprite
    sprite: Structures/Wallmounts/Lighting/light_tube.rsi
    drawdepth: WallMountedItems
    layers:
    - map: ["enum.PoweredLightLayers.Base"]
      state: base
    - map: ["enum.PoweredLightLayers.Glow"]
      state: glow
      shader: unshaded
    state: base
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.4,0.5,0.4,0.35"
        density: 190
        mask:
        - None
        layer:
        - TabletopMachineLayer

## Empty
- type: entity
  parent: [ BasePoweredLight , BaseLightTubeFixture ]
  id: PoweredLightTubeFixtureEmpty
  suffix: Empty
  description: A light fixture. Draws power and produces light when equipped with a light tube.
  components:
  - type: PoweredLight
    bulb: Tube

## Fluorescent
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureFluorescent
  suffix: Fluorescent
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTube

- type: entity
  parent: BaseLightTubeFixture
  id: AlwaysPoweredLightTubeFixtureFluorescent
  suffix: Always powered, fluorescent
  description: A light fixture that glows without consuming power.
  components:
  - type: PointLight
    color: "#FFE4CE" # 5000K color temp
    energy: 0.8
    radius: 10
    softness: 1

## LED
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureLED
  suffix: LED
  components:
  - type: PoweredLight
    hasLampOnSpawn: LedLightTube
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # LEDs don't get as hot
    popupText: powered-light-component-burn-hand

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureLED
  suffix: Always powered, LED
  components:
  - type: PointLight
    radius: 15
    energy: 1
    softness: 0.9
    color: "#EEEEFF"
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # LEDs don't get as hot
    popupText: powered-light-component-burn-hand

## Exterior
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureExterior
  suffix: Exterior
  components:
  - type: PoweredLight
    hasLampOnSpawn: ExteriorLightTube
  - type: DamageOnInteract
    damage:
      types:
        Heat: 4 # brighter light gets hotter
    popupText: powered-light-component-burn-hand

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureExterior
  suffix: Always powered, exterior
  components:
  - type: PointLight
    radius: 12
    energy: 4.5
    softness: 0.5
    color: "#B4FCF0"
  - type: DamageOnInteract
    damage:
      types:
        Heat: 4 # brighter light gets hotter
    popupText: powered-light-component-burn-hand

## Sodium
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureSodium
  suffix: Sodium
  components:
  - type: PoweredLight
    hasLampOnSpawn: SodiumLightTube

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureSodium
  suffix: Always powered, sodium
  components:
  - type: PointLight
    radius: 10
    energy: 4
    softness: 0.5
    color: "#FFAF38"

## Pink
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixturePink
  suffix: Pink
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalPink

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixturePink
  suffix: Always powered, pink
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#ff66cc"

## Red
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureRed
  suffix: Red
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalRed

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureRed
  suffix: Always powered, red
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#fb4747"

## Orange
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureOrange
  suffix: Orange
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalOrange

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureOrange
  suffix: Always powered, orange
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#ff8227"

## Yellow
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureYellow
  suffix: Yellow
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalYellow

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureYellow
  suffix: Always powered, yellow
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#ffde46"

## Green
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureGreen
  suffix: Green
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalGreen

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureGreen
  suffix: Always powered, green
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#52ff39"

## Cyan
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureCyan
  suffix: Cyan
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalCyan

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureCyan
  suffix: Always powered, cyan
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#47f8ff"

## Blue
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureBlue
  suffix: Blue
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalBlue

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureBlue
  suffix: Always powered, blue
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#39a1ff"

## Black
- type: entity
  parent: PoweredLightTubeFixtureEmpty
  id: PoweredLightTubeFixtureBlack
  suffix: Black
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalBlack

- type: entity
  parent: AlwaysPoweredLightTubeFixtureFluorescent
  id: AlwaysPoweredLightTubeFixtureBlack
  suffix: Always powered, black
  components:
  - type: PointLight
    radius: 8
    energy: 1
    softness: 0.5
    color: "#363636"


# 2. BULB WALL LIGHTS
- type: entity
  abstract: true
  parent: BaseLightFixture
  id: BaseLightBulbFixture
  name: light bulb fixture
  components:
  - type: Sprite
    sprite: Structures/Wallmounts/Lighting/light_small.rsi
    drawdepth: WallMountedItems
    layers:
    - map: ["enum.PoweredLightLayers.Base"]
      state: base
    - map: ["enum.PoweredLightLayers.Glow"]
      state: glow
      shader: unshaded
    state: base
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.1,0.5,0.1,0.255"
        density: 190
        mask:
        - None
        layer:
        - TabletopMachineLayer
  - type: Construction
    graph: LightFixture
    node: bulbLight
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors: #excess damage, don't spawn entities.
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
    - trigger:
        !type:DamageTrigger
        damage: 25
      behaviors:
      - !type:EmptyAllContainersBehaviour
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak

## Empty
- type: entity
  parent: [ BasePoweredLight , BaseLightBulbFixture ]
  id: PoweredLightBulbFixtureEmpty
  suffix: Empty
  components:
  - type: PoweredLight
    bulb: Bulb

## Incandescent
- type: entity
  parent: PoweredLightBulbFixtureEmpty
  id: PoweredLightBulbFixtureIncandescent
  suffix: Incandescent
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightBulb

- type: entity
  parent: BaseLightBulbFixture
  id: AlwaysPoweredLightBulbFixtureIncandescent
  suffix: Always powered, incandescent
  components:
  - type: PointLight
    color: "#FFD1A3"
    energy: 1.0
    radius: 6
    softness: 1.1

## LED
- type: entity
  parent: PoweredLightBulbFixtureEmpty
  id: PoweredLightBulbFixtureLED
  suffix: LED
  components:
  - type: PoweredLight
    hasLampOnSpawn: LedLightBulb
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # LEDs don't get as hot
    popupText: powered-light-component-burn-hand

# Dim
- type: entity
  parent: PoweredLightBulbFixtureEmpty
  id: PoweredLightBulbFixtureDim
  suffix: Dim
  components:
  - type: PoweredLight
    hasLampOnSpawn: DimLightBulb
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # dim light not as energetic
    popupText: powered-light-component-burn-hand

# Warm
- type: entity
  parent: PoweredLightBulbFixtureEmpty
  id: PoweredLightBulbFixtureWarm
  suffix: Warm
  components:
  - type: PoweredLight
    hasLampOnSpawn: WarmLightBulb
