#==Suffix Guide==
#Always Powered - light doesn't need power to give off life
#Empty - on map init, light spawns without bulb
#Blue/Sodium/etc. - the color of the light

########################

# Index

# 0. BASE
# 1. TUBE LIGHT FIXTURES
## Empty
## Fluorescent
## Incandescent
## LED
## Exterior
## Sodium
## Pink
## Red
## Orange
## Yellow
## Green
## Cyan
## Blue
## Black
# 2. LIGHT BULB FIXTURES
## Empty
## Incandescent
## LED
## Dim
## Warm
# 3. EMERGENCY LIGHTS

########################

# 0. BASE
## BasePoweredLight
- type: entity
  abstract: true
  id: BasePoweredLight
  components:
  - type: ContainerContainer
    containers:
      light_bulb: !type:ContainerSlot
  - type: ApcPowerReceiver
  - type: ExtensionCableReceiver
  - type: DeviceNetwork
    deviceNetId: Wireless
    receiveFrequencyId: SmartLight
  - type: WirelessNetworkConnection
    range: 200
  - type: DeviceLinkSink
    ports:
    - On
    - Off
    - Toggle
  - type: Appearance
  - type: PoweredLightVisuals
    blinkingSound:
      path: /Audio/Machines/light_tube_on.ogg
    spriteStateMap:
      empty: empty
      off: base
      on: base
      broken: broken
      burned: burned
  - type: AmbientOnPowered

## BaseLightFixture
- type: entity
  abstract: true
  parent: BaseStructure
  id: BaseLightFixture
  components:
  - type: InteractionOutline
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.4,0.5,0.4,0.35"
        density: 190
        mask:
        - None
        layer:
        - TabletopMachineLayer
  - type: PointLight
    offset: "0, -0.5"
  - type: Construction
    graph: LightFixture
    node: tubeLight
  - type: RCDDeconstructable
    cost: 4
    delay: 2
    fx: EffectRCDDeconstruct2
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors: #excess damage, don't spawn entities.
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:EmptyAllContainersBehaviour
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
  - type: MeleeSound
    soundGroups:
      Brute:
        collection: GlassSmash
  - type: DamageOnInteract
    damage:
      types:
        Heat: 2
    popupText: powered-light-component-burn-hand
  - type: AmbientSound
    volume: -15
    range: 2
    sound:
      path: /Audio/Ambience/Objects/light_hum.ogg

# 1. TUBE LIGHT FIXTURES
- type: entity
  abstract: true
  parent: BaseLightFixture
  id: BaseLightTubeFixture
  name: tube light fixture
  components:
  - type: Sprite
    sprite: Structures/Wallmounts/Lighting/light_tube.rsi
    drawdepth: WallMountedItems
    layers:
    - map: ["enum.PoweredLightLayers.Base"]
      state: base
    - map: ["enum.PoweredLightLayers.Glow"]
      state: glow
      shader: unshaded
    state: base
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.4,0.5,0.4,0.35"
        density: 190
        mask:
        - None
        layer:
        - TabletopMachineLayer

## Empty
- type: entity
  parent: [ BasePoweredLight , BaseLightTubeFixture ]
  id: PoweredlightEmpty
  suffix: Empty
  description: A light fixture. Draws power and produces light when equipped with a light tube.
  components:
  - type: PoweredLight
    bulb: Tube

## Fluorescent
- type: entity
  parent: PoweredlightEmpty
  id: Poweredlight
  suffix: Fluorescent
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTube

- type: entity
  parent: BaseLightTubeFixture
  id: AlwaysPoweredWallLight
  suffix: Always powered, fluorescent
  description: A light fixture that glows without consuming power.
  components:
  - type: PointLight
    color: "#FFE4CE" # 5000K color temp
    energy: 0.8
    radius: 10
    softness: 1

## LED
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightLED
  suffix: LED
  components:
  - type: PoweredLight
    hasLampOnSpawn: LedLightTube
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # LEDs don't get as hot
    popupText: powered-light-component-burn-hand

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredLightLED
  suffix: Always powered, LED
  components:
  - type: PointLight
    radius: 15
    energy: 1
    softness: 0.9
    color: "#EEEEFF"
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # LEDs don't get as hot
    popupText: powered-light-component-burn-hand

## Exterior
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightExterior
  suffix: Exterior
  components:
  - type: PoweredLight
    hasLampOnSpawn: ExteriorLightTube
  - type: DamageOnInteract
    damage:
      types:
        Heat: 4 # brighter light gets hotter
    popupText: powered-light-component-burn-hand

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredLightExterior
  suffix: Always powered, exterior
  components:
  - type: PointLight
    radius: 12
    energy: 4.5
    softness: 0.5
    color: "#B4FCF0"
  - type: DamageOnInteract
    damage:
      types:
        Heat: 4 # brighter light gets hotter
    popupText: powered-light-component-burn-hand

## Sodium
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightSodium
  suffix: Sodium
  components:
  - type: PoweredLight
    hasLampOnSpawn: SodiumLightTube

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredLightSodium
  suffix: Always powered, sodium
  components:
  - type: PointLight
    radius: 10
    energy: 4
    softness: 0.5
    color: "#FFAF38"

## Pink
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightPink
  suffix: Pink
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalPink

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightPink
  suffix: Always powered, pink
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#ff66cc"

## Red
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightRed
  suffix: Red
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalRed

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightRed
  suffix: Always powered, red
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#fb4747"

## Orange
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightOrange
  suffix: Orange
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalOrange

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightOrange
  suffix: Always powered, orange
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#ff8227"

## Yellow
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightYellow
  suffix: Yellow
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalYellow

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightYellow
  suffix: Always powered, yellow
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#ffde46"

## Green
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightGreen
  suffix: Green
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalGreen

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightGreen
  suffix: Always powered, green
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#52ff39"

## Cyan
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightCyan
  suffix: Cyan
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalCyan

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightCyan
  suffix: Always powered, cyan
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#47f8ff"

## Blue
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightBlue
  suffix: Blue
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalBlue

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightBlue
  suffix: Always powered, blue
  components:
  - type: PointLight
    radius: 8
    energy: 3
    softness: 0.5
    color: "#39a1ff"

## Black
- type: entity
  parent: PoweredlightEmpty
  id: PoweredlightBlack
  suffix: Black
  description:
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightTubeCrystalBlack

- type: entity
  parent: AlwaysPoweredWallLight
  id: AlwaysPoweredlightBlack
  suffix: Always powered, black
  components:
  - type: PointLight
    radius: 8
    energy: 1
    softness: 0.5
    color: "#363636"


# 2. BULB WALL LIGHTS
- type: entity
  abstract: true
  parent: BaseLightFixture
  id: BaseLightBulbFixture
  name: light bulb fixture
  components:
  - type: Sprite
    sprite: Structures/Wallmounts/Lighting/light_small.rsi
    drawdepth: WallMountedItems
    layers:
    - map: ["enum.PoweredLightLayers.Base"]
      state: base
    - map: ["enum.PoweredLightLayers.Glow"]
      state: glow
      shader: unshaded
    state: base
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.1,0.5,0.1,0.255"
        density: 190
        mask:
        - None
        layer:
        - TabletopMachineLayer
  - type: Construction
    graph: LightFixture
    node: bulbLight
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors: #excess damage, don't spawn entities.
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
    - trigger:
        !type:DamageTrigger
        damage: 25
      behaviors:
      - !type:EmptyAllContainersBehaviour
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak

## Empty
- type: entity
  parent: [ BasePoweredLight , BaseLightBulbFixture ]
  id: PoweredSmallLightEmpty
  suffix: Empty
  components:
  - type: PoweredLight
    bulb: Bulb

## Incandescent
- type: entity
  parent: PoweredSmallLightEmpty
  id: PoweredSmallLight
  suffix: Incandescent
  components:
  - type: PoweredLight
    hasLampOnSpawn: LightBulb

- type: entity
  parent: BaseLightBulbFixture
  id: SmallLight
  suffix: Always powered, incandescent
  components:
  - type: PointLight
    color: "#FFD1A3"
    energy: 1.0
    radius: 6
    softness: 1.1

## LED
- type: entity
  parent: PoweredSmallLightEmpty
  id: PoweredLEDSmallLight
  suffix: LED
  components:
  - type: PoweredLight
    hasLampOnSpawn: LedLightBulb
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # LEDs don't get as hot
    popupText: powered-light-component-burn-hand

# Dim
- type: entity
  parent: PoweredSmallLightEmpty
  id: PoweredDimSmallLight
  suffix: Dim
  components:
  - type: PoweredLight
    hasLampOnSpawn: DimLightBulb
  - type: DamageOnInteract
    damage:
      types:
        Heat: 1 # dim light not as energetic
    popupText: powered-light-component-burn-hand

# Warm
- type: entity
  parent: PoweredSmallLightEmpty
  id: PoweredWarmSmallLight
  suffix: Warm
  components:
  - type: PoweredLight
    hasLampOnSpawn: WarmLightBulb

# 3. EMERGENCY LIGHTS
- type: entity
  parent: BaseLightFixture
  id: EmergencyLight
  name: emergency light
  description: A small light with an internal battery that turns on as soon as it stops receiving any power. Nanotrasen technology allows it to adapt its color to alert crew to the conditions of the station.
  components:
  - type: PointLight
    enabled: false
    radius: 5
    energy: 0.6
    offset: "0, 0.4"
    color: "#7CFC00"
    mask: /Textures/Effects/LightMasks/double_cone.png
  - type: ApcPowerReceiver
  - type: ExtensionCableReceiver
  - type: Battery
    maxCharge: 30000
    startingCharge: 0
  - type: EmergencyLight
  - type: RotatingLight
    speed: 40
  - type: Sprite
    sprite: Structures/Wallmounts/Lighting/emergency_light.rsi
    layers:
    - state: base
      map: [ "enum.EmergencyLightVisualLayers.Base" ]
    - state: emergency_light_off
      map: [ "enum.EmergencyLightVisualLayers.LightOff" ]
      color: "#7CFC00"
    - state: emergency_light_on
      map: [ "enum.EmergencyLightVisualLayers.LightOn" ]
      color: "#7CFC00"
      shader: "unshaded"
      visible: false
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.2,0.5,0.2,0.35"
        density: 190
        mask:
        - None
        layer:
        - TabletopMachineLayer
  - type: Appearance
  - type: Construction
    graph: LightFixture
    node: emergencyLight
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors: #excess damage, don't spawn entities.
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
    - trigger:
        !type:DamageTrigger
        damage: 25
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 1
            max: 1
          ShardGlass:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
